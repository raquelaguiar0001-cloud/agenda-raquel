<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>RAQUEL AGUIAR | MOTIVATIONAL HUB</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&family=Syne:wght@700&display=swap');

        :root {
            --grad: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);
            --success: #00b894;
            --bg: #f8f9fd;
            --glass: rgba(255, 255, 255, 0.9);
        }

        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); 
            margin: 0; display: flex; height: 100vh; overflow: hidden; color: #2d3436;
        }

        /* SIDEBAR */
        .sidebar-raquel { 
            width: 420px; background: var(--glass); backdrop-filter: blur(15px);
            border-right: 1px solid rgba(0,0,0,0.05); display: flex; flex-direction: column;
            z-index: 10; transition: 0.3s;
        }

        .user-profile { 
            padding: 40px 30px; background: var(--grad); color: white;
            border-bottom-right-radius: 40px; box-shadow: 0 10px 20px rgba(108, 92, 231, 0.2);
        }
        .user-profile h1 { font-family: 'Syne', sans-serif; margin: 0; font-size: 24px; }

        /* Barra de Progresso */
        .progress-container { margin-top: 20px; background: rgba(255,255,255,0.2); height: 10px; border-radius: 10px; overflow: hidden; }
        .progress-bar { background: #55efc4; height: 100%; width: 0%; transition: 1s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

        .motivational-msg { font-size: 13px; font-style: italic; margin-top: 10px; min-height: 1.2em; opacity: 0.9; }

        .task-container { flex: 1; overflow-y: auto; padding: 25px; scrollbar-width: none; }
        .card-task { 
            background: white; border-radius: 20px; padding: 18px; margin-bottom: 12px;
            display: flex; align-items: center; gap: 15px; border: 2px solid transparent;
            transition: 0.4s; box-shadow: 0 4px 15px rgba(0,0,0,0.03); cursor: pointer;
            animation: slideIn 0.5s ease forwards;
        }
        .card-task:hover { transform: scale(1.02); }
        .card-task.done { border-color: #55efc4; background: #f1fefb; }
        .card-task.done .task-txt { text-decoration: line-through; color: #a0a0a0; }

        .check-circle { width: 28px; height: 28px; border-radius: 50%; border: 2px solid #6c5ce7; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .check-circle.checked { background: #00b894; border-color: #00b894; color: white; transform: rotate(360deg); }

        /* CALEND√ÅRIO */
        .main-panel { flex: 1; padding: 50px; overflow-y: auto; }
        .grid-calendar { display: grid; grid-template-columns: repeat(7, 1fr); gap: 15px; }
        .day { 
            background: white; aspect-ratio: 1; border-radius: 22px; padding: 12px;
            display: flex; flex-direction: column; justify-content: space-between;
            cursor: pointer; transition: 0.3s; border: 1px solid #f0f0f0; position: relative;
        }
        .day:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(108, 92, 231, 0.1); }
        
        /* Cores de Fundo do Dia */
        .bg-default { background: white; }
        .bg-lavender { background: #efeeff; border-color: #d1d0ff; }
        .bg-rose { background: #fff0f3; border-color: #ffccd5; }
        .bg-mint { background: #e6fffa; border-color: #b2f5ea; }
        .bg-peach { background: #fff5eb; border-color: #ffe3c2; }
        .bg-sky { background: #eef2ff; border-color: #c7d2fe; }

        .color-picker { display: flex; gap: 4px; position: absolute; top: 10px; right: 10px; opacity: 0; transition: 0.3s; }
        .day:hover .color-picker { opacity: 1; }
        .color-dot { width: 12px; height: 12px; border-radius: 50%; border: 1px solid rgba(0,0,0,0.05); cursor: pointer; }

        #modal { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.3); display:none; align-items:center; justify-content:center; backdrop-filter: blur(8px); z-index: 100; }
        .modal-body { background: white; padding: 40px; border-radius: 30px; width: 380px; box-shadow: 0 30px 60px rgba(0,0,0,0.2); }
        
        @keyframes slideIn { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }
    </style>
</head>
<body>

<aside class="sidebar-raquel">
    <div class="user-profile">
        <h1 id="greeting">Ol√°, Raquel Aguiar</h1>
        <div id="stats" style="font-size: 14px; margin-top: 10px;">Vamos conquistar o dia? üöÄ</div>
        
        <div class="progress-container">
            <div id="p-bar" class="progress-bar"></div>
        </div>
        <div id="motivation" class="motivational-msg">"Um passo de cada vez, o sucesso √© o resultado da sua const√¢ncia."</div>
    </div>
    <div class="task-container" id="task-list"></div>
</aside>

<main class="main-panel">
    <h2 style="font-family:'Syne'; font-size: 32px; margin-bottom: 30px;">Fevereiro <span style="color:#6c5ce7">2026</span></h2>
    <div class="grid-calendar" id="calendar"></div>
</main>

<div id="modal" onclick="closeModal()">
    <div class="modal-body" onclick="event.stopPropagation()">
        <h2 style="margin:0; font-family:'Syne'; color:#6c5ce7;">Novo Desafio</h2>
        <input type="text" id="task-input" placeholder="O que vamos realizar hoje? ‚ú®" 
               style="width: 100%; border: none; background: #f1f2f6; padding: 18px; border-radius: 15px; margin: 25px 0; outline: none;">
        <button onclick="addTask()" style="background: var(--grad); color: white; border: none; padding: 18px; border-radius: 15px; width: 100%; font-weight: 800; cursor: pointer;">SALVAR ATIVIDADE</button>
    </div>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyAXIOrHsZbHXvOIGTk0HS8NOwVBvpmwrOo",
        databaseURL: "https://ue-joao-tavares-da-costa-default-rtdb.firebaseio.com",
        projectId: "ue-joao-tavares-da-costa",
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let tasks = [];
    let daySettings = {};
    let activeDay = "";

    const frasesVitoria = ["Arrasou, Raquel! üåü", "Voc√™ √© impar√°vel! üî•", "Feito √© melhor que perfeito! ‚ú®", "Mais um passo rumo ao topo! üöÄ", "Orgulho da sua dedica√ß√£o! üíé"];
    const sauda√ß√µes = ["Foco total, Raquel!", "Dia de brilhar!", "Sua produtividade est√° incr√≠vel!", "Pronta para mais um round?"];

    db.ref('hub_raquel_v6').on('value', snap => {
        const data = snap.val() || {};
        tasks = data.tasks || [];
        daySettings = data.daySettings || {};
        render();
    });

    function render() {
        const list = document.getElementById('task-list');
        const doneTasks = tasks.filter(t => t.done).length;
        const totalTasks = tasks.length;
        const percent = totalTasks > 0 ? (doneTasks / totalTasks) * 100 : 0;

        document.getElementById('p-bar').style.width = percent + "%";
        document.getElementById('greeting').innerText = percent === 100 && totalTasks > 0 ? "Miss√£o Cumprida! üéâ" : "Ol√°, Raquel Aguiar";
        
        list.innerHTML = tasks.sort((a,b) => a.done - b.done).map(t => `
            <div class="card-task ${t.done ? 'done' : ''}" onclick="toggleTask(${t.id}, ${t.done})">
                <div class="check-circle ${t.done ? 'checked' : ''}">${t.done ? '‚úì' : ''}</div>
                <div style="flex:1">
                    <div class="task-txt" style="font-weight: 600; font-size: 14px;">${t.title}</div>
                    <div style="font-size: 11px; color: #a29bfe;">Dia ${t.date.split('-')[2]}</div>
                </div>
                <button onclick="deleteTask(event, ${t.id})" style="border:none; background:none; opacity:0.3;">‚úñ</button>
            </div>
        `).join('') || `<p style="text-align:center; color:#ccc; margin-top:50px;">Planeje sua pr√≥xima vit√≥ria clicando no calend√°rio!</p>`;

        renderCalendar();
    }

    function renderCalendar() {
        const cal = document.getElementById('calendar');
        cal.innerHTML = "";
        for(let i=1; i<=28; i++) {
            const dateStr = `2026-02-${String(i).padStart(2, '0')}`;
            const dayColor = daySettings[dateStr] || 'default';
            const dayTasks = tasks.filter(t => t.date === dateStr);

            cal.innerHTML += `
                <div class="day bg-${dayColor}" onclick="openModal(${i})">
                    <div class="color-picker">
                        <div class="color-dot" style="background:#efeeff" onclick="setDayColor(event, '${dateStr}', 'lavender')"></div>
                        <div class="color-dot" style="background:#fff0f3" onclick="setDayColor(event, '${dateStr}', 'rose')"></div>
                        <div class="color-dot" style="background:#e6fffa" onclick="setDayColor(event, '${dateStr}', 'mint')"></div>
                        <div class="color-dot" style="background:white" onclick="setDayColor(event, '${dateStr}', 'default')"></div>
                    </div>
                    <span style="font-weight: 800;">${i}</span>
                    <div style="display:flex; gap:3px;">
                        ${dayTasks.map(t => `<div style="width:6px; height:6px; border-radius:50%; background:#6c5ce7; ${t.done ? 'background:#00b894' : ''}"></div>`).join('')}
                    </div>
                </div>`;
        }
    }

    function toggleTask(id, alreadyDone) {
        const idx = tasks.findIndex(t => t.id === id);
        tasks[idx].done = !tasks[idx].done;
        
        if (!alreadyDone) {
            document.getElementById('motivation').innerText = frasesVitoria[Math.floor(Math.random() * frasesVitoria.length)];
            document.getElementById('motivation').style.color = "#00b894";
            document.getElementById('motivation').style.fontWeight = "bold";
        }

        db.ref('hub_raquel_v6').update({ tasks });
    }

    function setDayColor(e, date, color) { e.stopPropagation(); daySettings[date] = color; db.ref('hub_raquel_v6').update({ daySettings }); }
    function openModal(d) { activeDay = `2026-02-${String(d).padStart(2, '0')}`; document.getElementById('modal').style.display = "flex"; }
    function closeModal() { document.getElementById('modal').style.display = "none"; }
    function addTask() {
        const title = document.getElementById('task-input').value;
        if(!title) return;
        tasks.push({ id: Date.now(), title, date: activeDay, done: false });
        db.ref('hub_raquel_v6').update({ tasks });
        document.getElementById('task-input').value = "";
        closeModal();
    }
    function deleteTask(e, id) { e.stopPropagation(); tasks = tasks.filter(t => t.id !== id); db.ref('hub_raquel_v6').update({ tasks }); }
</script>
</body>
</html>
